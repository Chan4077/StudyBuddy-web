<mat-sidenav-container fullscreen>
	<mat-sidenav #left [mode]="isMobile ? 'over':'side'" class="app-sidenav mat-elevation-z2">
		<mat-toolbar>
			Links
			<span fxFlex></span>
			<button mat-icon-button (click)="left.close()" matTooltip="Close sidenav" matTooltipPosition="right">
				<mat-icon>keyboard_arrow_left</mat-icon>
			</button>
		</mat-toolbar>
		<mat-nav-list>
			<a mat-list-item *ngFor="let link of sidenavLinks" [routerLink]="['/'+link.link]" routerLinkActive="active-link" (click)="left.close()">
				<mat-icon matListIcon>{{link.icon}}</mat-icon>
				<h3 matLine>{{link.title}}</h3>
			</a>
			<mat-divider></mat-divider>
			<h3 matSubheader>Other</h3>
			<a mat-list-item *ngFor="let link of otherLinks" [routerLink]="['/'+link.link]" routerLinkActive="active-link" (click)="left.close()">
				<mat-icon matListIcon>{{link.icon}}</mat-icon>
				<h3 matLine>{{link.title}}</h3>
			</a>
		</mat-nav-list>
		<footer style="bottom:0;position:absolute" fxLayout="row">
			<mat-icon>info</mat-icon>
			&nbsp;
			<p>Version 1.0.0</p>
		</footer>
	</mat-sidenav>
	<mat-sidenav #notifySidenav class="app-notify-sidenav mat-elevation-z2" align="end">
		<mat-toolbar color="primary">
			Notifications
			<span fxFlex></span>
			<button mat-icon-button (click)="notifySidenav.close()">
				<mat-icon>close</mat-icon>
			</button>
		</mat-toolbar>
		<mat-card>
			<mat-card-title>Todo due soon</mat-card-title>
			<mat-card-content>
				Your todo "todo #1" will be due soon.
			</mat-card-content>
			<mat-card-actions align="end">
				<button mat-icon-button matTooltip="Mark as done"><mat-icon>done</mat-icon></button>
				<button mat-icon-button matTooltip="Change due date"><mat-icon>event</mat-icon></button>
				<button mat-icon-button matTooltip="Dismiss"><mat-icon>close</mat-icon></button>
			</mat-card-actions>
		</mat-card>
	</mat-sidenav>
	<mat-sidenav-content>
		<mat-toolbar color="primary" class="mat-elevation-z3" *ngIf="toolbarService.showToolbar" id="topToolbar">
			<button mat-icon-button (click)="left.toggle()" *ngIf="!isSidenavOpened">
				<mat-icon>menu</mat-icon>
			</button>
			Study Buddy
			<span fxFlex></span>
			<button mat-icon-button [matMenuTriggerFor]="accountMenu" matTooltip="Account">
				<mat-icon>account_circle</mat-icon>
			</button>
			<mat-menu #accountMenu="matMenu" [overlapTrigger]="false">
				<mat-nav-list>
					<mat-list-item *ngIf="isSignedIn">
						<img matListAvatar src="{{(userObservable | async)?.photoURL}}">
						<h3 matLine>{{(userObservable | async)?.displayName}}</h3>
						<span matLine style="overflow:initial">{{(userObservable | async)?.email}}</span>
					</mat-list-item>
					<mat-divider></mat-divider>
					<div *ngIf="isSignedIn">
						<h3 matSubheader>Account Actions</h3>
						<mat-list-item>
							<mat-icon matListIcon>sync</mat-icon>
							<h3 matLine>Sync</h3>
						</mat-list-item>
						<mat-list-item (click)="exportData()">
							<mat-icon matListIcon>file_download</mat-icon>
							<h3 matLine>Export data</h3>
						</mat-list-item>
						<mat-list-item (click)="deleteUser()">
							<mat-icon matListIcon>
								<svg width="24px" height="24px" viewBox="0 0 24 24">
									<path d="M15,14C17.67,14 23,15.33 23,18V20H7V18C7,15.33 12.33,14 15,14M15,12A4,4 0 0,1 11,8A4,4 0 0,1 15,4A4,4 0 0,1 19,8A4,4 0 0,1 15,12M5,9.59L7.12,7.46L8.54,8.88L6.41,11L8.54,13.12L7.12,14.54L5,12.41L2.88,14.54L1.46,13.12L3.59,11L1.46,8.88L2.88,7.46L5,9.59Z"
									/>
								</svg>
							</mat-icon>
							<h3 matLine>Unregister</h3>
						</mat-list-item>
						<mat-list-item (click)="signOut()">
							<mat-icon matListIcon>exit_to_app</mat-icon>
							<h3 matLine>Log out</h3>
						</mat-list-item>
					</div>
					<mat-divider></mat-divider>
					<h3 matSubheader>Help</h3>
					<a routerLink="/settings" mat-list-item>
						<mat-icon matListIcon>settings</mat-icon>
						<h3 matLine>Settings</h3>
					</a>
					<a href="https://goo.gl/forms/tz6cmNguIHuZMZIh2" mat-list-item>
						<mat-icon matListIcon>feedback</mat-icon>
						<h3 matLine>Send feedback</h3>
					</a>
					<a routerLink="." mat-list-item>
						<mat-icon matListIcon>help</mat-icon>
						<h3 matLine>Help</h3>
					</a>
					<!-- For debugging only -->
					<div *ngIf="!environment.production">
						<mat-divider></mat-divider>
						<h3 matSubheader>Developer</h3>
						<mat-list-item (click)="openUserInfoDialog()">
							<mat-icon matListIcon>build</mat-icon>
							<h3 matLine>Get user info</h3>
						</mat-list-item>
					</div>
					<mat-list-item (click)="signIn()" *ngIf="!isSignedIn">
						<mat-icon matListIcon>
							<svg width="24px" height="24px" viewBox="0 0 24 24">
								<path d="M14.08,15.59L16.67,13H7V11H16.67L14.08,8.41L15.5,7L20.5,12L15.5,17L14.08,15.59M19,3A2,2 0 0,1 21,5V9.67L19,7.67V5H5V19H19V16.33L21,14.33V19A2,2 0 0,1 19,21H5C3.89,21 3,20.1 3,19V5C3,3.89 3.89,3 5,3H19Z"
								/>
							</svg>
						</mat-icon>
						<h3 matLine>Login</h3>
					</mat-list-item>
				</mat-nav-list>
			</mat-menu>
			<button mat-icon-button matTooltip="Notifications" (click)="notifySidenav.toggle()">
				<mat-icon matBadge="10" matBadgeColor="accent">notifications</mat-icon>
			</button>
		</mat-toolbar>
		<router-outlet></router-outlet>
	</mat-sidenav-content>
</mat-sidenav-container>