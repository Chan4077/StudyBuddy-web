{
  "schema": {
    "title": "Quiz metadata",
    "type": "object",
    "required": [
      "title"
    ],
    "properties": {
      "title": {
        "type": "string",
        "title": "Title"
      },
      "description": {
        "type": "string",
        "title": "Description"
      },
      "questions": {
        "type": "array",
        "title": "Questions",
        "minItems": 1,
        "items": {
          "type": "object",
          "widget": {
            "formlyConfig": {
              "templateOptions": {
                "hideFieldLabel": true,
                "hideFieldDesc": true
              },
              "expressionProperties": {
                "templateOptions.label": "model.text"
              }
            }
          },
          "required": [
            "text",
            "answers"
          ],
          "properties": {
            "text": {
              "type": "string",
              "title": "Question text"
            },
            "questionType": {
              "type": "select",
              "widget": {
                "formlyConfig": {
                  "templateOptions": {
                    "options": [
                      { "value": "none", "label": "None", "disabled": true },
                      { "value": "default", "label": "Default", "disabled": true },
                      { "value": "short_answer", "label": "Short answer", "disabled": true },
                      { "value": "paragraph", "label": "Paragraph", "disabled": true },
                      { "value": "multiple_choice", "label": "Multiple choice" },
                      { "value": "check_boxes", "label": "Check boxes" },
                      { "value": "drop_down", "label": "Drop-down" },
                      { "value": "linear_scale", "label": "Linear scale", "disabled": true },
                      { "value": "multiple_choice_grid", "label": "Multiple-choice grid", "disabled": true },
                      { "value": "check_box_grid", "label": "Checkbox grid", "disabled": true },
                      { "value": "date", "label": "Date", "disabled": true },
                      { "value": "time", "label": "Time", "disabled": true }
                    ]
                  }
                }
              },
              "title": "Question type"
            },
            "answers": {
              "type": "array",
              "title": "Answers",
              "widget": {
                "formlyConfig": {
                  "templateOptions": {
                    "useAccordion": false
                  },
                  "hideExpression": "!(['multiple_choice', 'check_boxes', 'drop_down'].includes(field.parent.model.questionType))"
                }
              },
              "items": {
                "type": "object",
                "required": [
                  "text",
                  "value"
                ],
                "properties": {
                  "text": {
                    "type": "string",
                    "title": "Answer text"
                  },
                  "isCorrect": {
                    "type": "boolean",
                    "title": "Correct answer?",
                    "default": false
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
